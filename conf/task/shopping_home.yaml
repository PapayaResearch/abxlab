_base_: _base_task.yaml

name: HomepageSearch-v0
config:
  start_urls:
    - ${env.wa_shopping_url}
  choices:
    - url: "*" # Will match all URLs (so we can nudge on any given page, in principle)
      functions:
        - module: nudgelab.choices.shop.home
          name: subtitle
          args:
            value: ???
  # Evaluation setup
  eval:
    eval_types:
      - program_html
    reference_answers: null
    reference_url: ""
    program_html:
      # This is the most recent page, where we check if any item was added to cart
      - url: last
        locator: "document.querySelector('div.message-success div[data-bind*=\"prepareMessageForHtml\"]').innerText"
        required_contents:
          must_include:
            - "You added"
